var N=Object.defineProperty;var H=(t,e,s)=>e in t?N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var l=(t,e,s)=>H(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();class T{constructor(e,s,a){this.type=e,this.timeStamp=s,this.source=a}}class M extends T{constructor(e,s,a,i,n){super(e,s,n),this.x=a,this.y=i}}class F extends T{constructor(e,s,a=null,i){super(e,s,i),this.key=a}}class V extends T{constructor(e,s,a,i,n){super(e,s,n),this.width=a,this.height=i}}function X(t,e,s,a){return Math.sqrt((t-s)**2+(e-a)**2)}const _={update(t){switch(t.type){case"mousedown":case"mouseup":case"mousemove":return new M(t.type,t.timeStamp,t.x||0,t.y||0);case"keydown":case"keyup":return new F(t.type,t.timeStamp,t.key);case"resize":return new V(t.type,t.timeStamp,document.body.clientWidth,document.body.clientHeight);case"null":return;default:return new T(t.type,t.timeStamp)}}},W={state:"IDLE",movementThreshold:10,timeThreshold:800,startX:0,startY:0,startTime:0,update(t){switch(this.state){case"IDLE":t.type=="mousedown"&&(this.state="DOWN",this.startX=t.x||0,this.startY=t.y||0,this.startTime=t.timeStamp);break;case"DOWN":if(t.timeStamp-this.startTime>this.timeThreshold)this.state="IDLE";else if(t.x&&t.y&&X(t.x,t.y,this.startX,this.startY)>this.movementThreshold)this.state="IDLE";else if(t.type=="mouseup")return this.state="IDLE",new M("click",t.timeStamp,t.x||0,t.y||0);break}}},q={internalClickTranslator:{...W},state:"IDLE",timeThreshold:500,startTime:0,update(t){const e=this.internalClickTranslator.update(t);switch(this.state){case"IDLE":e&&e.type=="click"&&(this.state="READY",this.startTime=e.timeStamp);break;case"READY":if(t.timeStamp-this.startTime>this.timeThreshold)this.state="IDLE";else if(e&&e.type=="click")return this.state="IDLE",new M("dblclick",t.timeStamp,t.x||0,t.y||0);break}}},B={state:"IDLE",movementThreshold:20,startX:0,startY:0,update(t){switch(this.state){case"IDLE":t.type=="mousedown"&&(this.state="DOWN",this.startX=t.x||0,this.startY=t.y||0);break;case"DOWN":if(t.type=="mouseup")this.state="IDLE";else if(t.type=="mousemove"&&t.x&&t.y&&X(t.x,t.y,this.startX,this.startY)>this.movementThreshold)return this.state="DRAG",{type:"dragstart",timeStamp:t.timeStamp,x:t.x,y:t.y};break;case"DRAG":if(t.type=="mousemove")return{type:"drag",timeStamp:t.timeStamp,x:t.x,y:t.y};if(t.type=="mouseup")return this.state="IDLE",{type:"dragend",timeStamp:t.timeStamp,x:t.x,y:t.y};break}}};function A(t){if(t.type=="resize")return{type:t.type,timeStamp:t.timeStamp,width:document.body.clientWidth,height:document.body.clientHeight};if(t.type=="mouseup"||t.type=="mousedown"||t.type=="mousemove"){const e=t;return{type:t.type,timeStamp:t.timeStamp,x:e.x,y:e.y}}else if(t.type=="keyup"||t.type=="keydown"){const e=t;return e.repeat?void 0:{type:t.type,timeStamp:t.timeStamp,key:e.key}}else{console.warn(`event ${t.type} not supported as FundamentalEvent`);return}}function U(t){const e=[];function s(n){const h=A(n);h&&e.push(h)}window.addEventListener("mousedown",s),window.addEventListener("mouseup",s),window.addEventListener("mousemove",s),window.addEventListener("keydown",s),window.addEventListener("keyup",s),window.addEventListener("resize",s);const a=A(new Event("resize"));a&&e.push(a);function i(n){t(e,n),window.requestAnimationFrame(i)}window.requestAnimationFrame(i)}function G(t,e=["mousemove","resize"]){const s=[...t];t.length=0,s.forEach(a=>{if(a.type in e){const i=t.findIndex(n=>n.type in e);i>-1?t[i]=a:t.push(a)}else t.push(a)})}function j(t="whitesmoke"){let e=document.createElement("canvas");return document.body.appendChild(e),e.style.setProperty("background",t),document.documentElement.style.setProperty("width","100%"),document.documentElement.style.setProperty("height","100%"),document.documentElement.style.setProperty("margin","0"),document.documentElement.style.setProperty("padding","0"),document.body.style.setProperty("width","100%"),document.body.style.setProperty("height","100%"),document.body.style.setProperty("margin","0"),document.body.style.setProperty("padding","0"),e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),e.style.setProperty("display","block"),e.width=document.body.clientWidth,e.height=document.body.clientHeight,window.addEventListener("resize",()=>{e.width=document.body.clientWidth,e.height=document.body.clientHeight}),console.info(` created ${e.width} by ${e.height} canvas`),e}const J="0.0.0";function Z(t,e){G(t);let s=[];for(t.length==0&&t.push({type:"null",timeStamp:e});t.length>0;){const a=t.shift();a&&L.forEach(i=>{const n=i.update(a);n&&s.push(n)})}D&&s.forEach(a=>D(a)),I&&I(e),P&&P(S)}let S;const L=[_,W,q,B];function Q(t){L.push(t),console.log(`added event translator, now ${L.length} translators`)}function tt(t){D=t}let D;function et(t){P=t}let P;function st(t){I=t}let I;function it(){console.info(`ðŸ§° SimpleKit v${J} *Canvas Mode* startup`);const e=j().getContext("2d");return e?(S=e,U(Z),{width:S.canvas.width,height:S.canvas.height}):(console.error("Unable to get graphics context from canvas"),!1)}const at=(t,e,s)=>t+(e-t)*s;class z{constructor(e,s,a,i,n=h=>h){l(this,"startTime");l(this,"_isRunning",!1);this.startValue=e,this.endValue=s,this.duration=a,this.updateValue=i,this.easing=n}start(e){this.startTime=e,this._isRunning=!0}get isRunning(){return this._isRunning}update(e){if(!this._isRunning||this.startTime===void 0)return;const s=Math.min(1,(e-this.startTime)/this.duration),a=at(this.startValue,this.endValue,this.easing(s));this.updateValue(a),s===1&&(this.startTime=void 0,this._isRunning=!1)}}class nt{constructor(e=0,s=0,a=0,i=20,n="grey"){l(this,"ring",null);l(this,"ringSize",1);l(this,"offsetX",0);l(this,"offsetY",0);l(this,"state","future");l(this,"isHover",!1);l(this,"isDown",!1);this.id=e,this.x=s,this.y=a,this.radius=i,this.fill=n}onClick(e){this.ring=new z(1,1.5,333,s=>{this.ringSize=s}),this.ring.start(e)}update(e){this.ring&&this.ring.update(e)}draw(e){var n;e.save();let s;switch(this.state){case"next":s="white";break;case"clicked":s=this.fill;break;case"future":s="darkgrey";break}const a=this.x+this.offsetX,i=this.y+this.offsetY;e.beginPath(),e.arc(a,i,this.radius,0,2*Math.PI),e.fillStyle=s,e.fill(),this.isHover&&(e.beginPath(),e.arc(a,i,this.radius,0,2*Math.PI),e.strokeStyle="lightblue",e.lineWidth=3,e.stroke()),this.isDown&&(e.beginPath(),e.arc(a,i,this.radius+3,0,2*Math.PI),e.strokeStyle="yellow",e.lineWidth=3,e.stroke()),(n=this.ring)!=null&&n.isRunning&&(e.beginPath(),e.arc(a,i,this.radius+this.ringSize,0,2*Math.PI),e.strokeStyle="yellow",e.lineWidth=3,e.stroke()),e.fillStyle=this.state==="future"?"lightgrey":"black",e.font="20px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillText(`${this.id}`,a,i),e.restore()}hitTest(e,s){const a=e-this.x,i=s-this.y;return a*a+i*i<=this.radius*this.radius}}class rt{constructor(e,s,a="white"){l(this,"offsetX",0);l(this,"offsetY",0);l(this,"animate",new z(0,1,750,e=>{this.offsetX=(this.end.x-this.start.x)*e,this.offsetY=(this.end.y-this.start.y)*e}));this.start=e,this.end=s,this.fill=a}update(e){this.animate.update(e)}startAnimation(e){this.animate.start(e)}draw(e){e.save();const s=this.animate.isRunning?this.start.x+this.offsetX:this.end.x,a=this.animate.isRunning?this.start.y+this.offsetY:this.end.y;e.beginPath(),e.moveTo(this.start.x,this.start.y),e.lineTo(s,a),e.lineWidth=5,e.strokeStyle=this.fill,e.stroke(),e.restore()}}const ot={state:"IDLE",movementThreshold:10,timeThreshold:1e3,startX:0,startY:0,startTime:0,update(t){switch(this.state){case"IDLE":t.type=="mousedown"&&(this.state="DOWN",this.startX=t.x??0,this.startY=t.y??0,this.startTime=t.timeStamp);break;case"DOWN":if(t.type=="mouseup"||t.type=="mousemove"&&t.x&&t.y&&X(t.x,t.y,this.startX,this.startY)>this.movementThreshold)this.state="IDLE";else if(t.timeStamp-this.startTime>this.timeThreshold)return this.state="IDLE",{type:"longclick",timeStamp:t.timeStamp,x:t.x??this.startX,y:t.y??this.startY};break}}};let o="start";const y=50;let O=0,p=30,c=1,u=!0;const g={width:0,height:0};let v=!1,k=[],r=x(6),w=0,K=0,b=Number.MAX_VALUE;tt(t=>{switch(t.type){case"longclick":o==="play"&&(o="start",r=x(r.length),u=!0,c=1);break;case"resize":const{width:e,height:s}=t;g.width=e,g.height=s,u=!0;break;case"mousedown":if(o==="start"||o==="play"){const{x:i,y:n}=t,h=r.find(d=>d.hitTest(i,n));h?(h.isDown=!0,v=h.id!==c):v=!0}break;case"mouseup":(o==="start"||o==="play")&&(r.forEach(i=>i.isDown=!1),v=!1);break;case"mousemove":if(o==="start"||o==="play"){const{x:i,y:n}=t,h=r.find(d=>d.hitTest(i,n));h?h.isHover=!0:r.forEach(d=>d.isHover=!1)}break;case"click":if(o==="start"||o==="play"){const{x:i,y:n}=t,h=r.find(d=>d.hitTest(i,n));h&&h.id===c&&(h.onClick(t.timeStamp),R(h,t.timeStamp))}break;case"keydown":const{key:a}=t;switch(a){case"]":o==="start"&&r.length<8&&(r=x(r.length+1),u=!0,C());break;case"[":o==="start"&&r.length>3&&(r=x(r.length-1),u=!0,C());break;case"}":o==="start"&&p<45&&(p+=5,u=!0);break;case"{":o==="start"&&p>15&&(p-=5,u=!0);break;case" ":(o==="start"||o==="end")&&(r=x(r.length),u=!0,o==="end"&&(o="start",c=1));break;case"c":if(o==="play"){const i=r.find(n=>n.id===c);i&&(i.onClick(t.timeStamp),R(i,t.timeStamp))}break}break}u&&(lt(0,y,g.width,g.height-y),u=!1)});st(t=>{o==="play"&&(w=(t-K)/1e3),k.forEach(e=>e.update(t)),r.forEach(e=>e.update(t)),o==="end"&&ht()});let E=0;function ht(){E+=.2,r.forEach((e,s)=>{e.offsetX=Math.sin(E+s*2)*10,e.offsetY=Math.cos(E+s*2)*10});const t=r.slice(0).sort((e,s)=>e.id-s.id);k.forEach((e,s)=>{e.start.x=t[s].x+t[s].offsetX,e.start.y=t[s].y+t[s].offsetY,e.end.x=t[s+1].x+t[s+1].offsetX,e.end.y=t[s+1].y+t[s+1].offsetY})}et(t=>{switch(t.fillStyle=v?"darkred":"black",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.strokeStyle="white",t.lineWidth=2,t.beginPath(),t.moveTo(0,y),t.lineTo(t.canvas.width,y),t.stroke(),t.fillStyle="white",t.font="24px sans-serif",t.textAlign="center",t.textBaseline="middle",o){case"start":t.fillText("click target 1 to begin",t.canvas.width/2,y/2);break;case"play":t.fillText(`${w.toFixed(2)}s`,t.canvas.width/2,y/2);break;case"end":const e=w===b?"(new best!)":`(best ${b.toFixed(2)}s)`;t.fillText(`${w.toFixed(2)}s ${e}`,t.canvas.width/2,y/2)}k.forEach(e=>e.draw(t)),r.forEach(e=>e.draw(t))});Q(ot);it();function C(){b=Number.MAX_VALUE}function x(t){k=[];let e=[];for(let s=0;s<t;s++)e.push(new nt(s+1,p));return e[0].state="next",e.sort(()=>Math.random()-.5),O=Math.random()*2*Math.PI,e}function lt(t,e,s,a){const i=p+30;t+=i,e+=i,s-=i*2,a-=i*2;const n=Math.min(s,a)/2,h=s/2,d=a/2,$=r.length;r.forEach((m,f)=>{const Y=O+f*2*Math.PI/$;m.x=t+h+n*Math.cos(Y),m.y=e+d+n*Math.sin(Y),m.radius=p}),k.forEach((m,f)=>{m.start.x=r[f].x,m.start.y=r[f].y,m.end.x=r[f+1].x,m.end.y=r[f+1].y})}function R(t,e){c===1&&(o="play",K=e,w=0),t.state="clicked",t.fill=`hsl(${c/r.length*360}, 100%, 50%)`;const s=r.find(a=>a.id===c-1);if(s){const a=new rt({x:s.x,y:s.y},{x:t.x,y:t.y},`hsl(${(c-1)/r.length*360}, 100%, 50%)`);a.startAnimation(e),k.push(a)}if(c++,c<=r.length){const a=r.find(i=>i.id===c);a&&(a.state="next")}else r.forEach(a=>a.isHover=!1),o="end",b=Math.min(b,w)}
