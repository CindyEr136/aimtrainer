var H=Object.defineProperty;var N=(t,e,s)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var h=(t,e,s)=>N(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();class T{constructor(e,s,n){this.type=e,this.timeStamp=s,this.source=n}}class M extends T{constructor(e,s,n,i,a){super(e,s,a),this.x=n,this.y=i}}class F extends T{constructor(e,s,n=null,i){super(e,s,i),this.key=n}}class V extends T{constructor(e,s,n,i,a){super(e,s,a),this.width=n,this.height=i}}function X(t,e,s,n){return Math.sqrt((t-s)**2+(e-n)**2)}const q={update(t){switch(t.type){case"mousedown":case"mouseup":case"mousemove":return new M(t.type,t.timeStamp,t.x||0,t.y||0);case"keydown":case"keyup":return new F(t.type,t.timeStamp,t.key);case"resize":return new V(t.type,t.timeStamp,document.body.clientWidth,document.body.clientHeight);case"null":return;default:return new T(t.type,t.timeStamp)}}},W={state:"IDLE",movementThreshold:10,timeThreshold:800,startX:0,startY:0,startTime:0,update(t){switch(this.state){case"IDLE":t.type=="mousedown"&&(this.state="DOWN",this.startX=t.x||0,this.startY=t.y||0,this.startTime=t.timeStamp);break;case"DOWN":if(t.timeStamp-this.startTime>this.timeThreshold)this.state="IDLE";else if(t.x&&t.y&&X(t.x,t.y,this.startX,this.startY)>this.movementThreshold)this.state="IDLE";else if(t.type=="mouseup")return this.state="IDLE",new M("click",t.timeStamp,t.x||0,t.y||0);break}}},_={internalClickTranslator:{...W},state:"IDLE",timeThreshold:500,startTime:0,update(t){const e=this.internalClickTranslator.update(t);switch(this.state){case"IDLE":e&&e.type=="click"&&(this.state="READY",this.startTime=e.timeStamp);break;case"READY":if(t.timeStamp-this.startTime>this.timeThreshold)this.state="IDLE";else if(e&&e.type=="click")return this.state="IDLE",new M("dblclick",t.timeStamp,t.x||0,t.y||0);break}}},B={state:"IDLE",movementThreshold:20,startX:0,startY:0,update(t){switch(this.state){case"IDLE":t.type=="mousedown"&&(this.state="DOWN",this.startX=t.x||0,this.startY=t.y||0);break;case"DOWN":if(t.type=="mouseup")this.state="IDLE";else if(t.type=="mousemove"&&t.x&&t.y&&X(t.x,t.y,this.startX,this.startY)>this.movementThreshold)return this.state="DRAG",{type:"dragstart",timeStamp:t.timeStamp,x:t.x,y:t.y};break;case"DRAG":if(t.type=="mousemove")return{type:"drag",timeStamp:t.timeStamp,x:t.x,y:t.y};if(t.type=="mouseup")return this.state="IDLE",{type:"dragend",timeStamp:t.timeStamp,x:t.x,y:t.y};break}}};function A(t){if(t.type=="resize")return{type:t.type,timeStamp:t.timeStamp,width:document.body.clientWidth,height:document.body.clientHeight};if(t.type=="mouseup"||t.type=="mousedown"||t.type=="mousemove"){const e=t;return{type:t.type,timeStamp:t.timeStamp,x:e.x,y:e.y}}else if(t.type=="keyup"||t.type=="keydown"){const e=t;return e.repeat?void 0:{type:t.type,timeStamp:t.timeStamp,key:e.key}}else{console.warn(`event ${t.type} not supported as FundamentalEvent`);return}}function G(t){const e=[];function s(a){const l=A(a);l&&e.push(l)}window.addEventListener("mousedown",s),window.addEventListener("mouseup",s),window.addEventListener("mousemove",s),window.addEventListener("keydown",s),window.addEventListener("keyup",s),window.addEventListener("resize",s);const n=A(new Event("resize"));n&&e.push(n);function i(a){t(e,a),window.requestAnimationFrame(i)}window.requestAnimationFrame(i)}function U(t,e=["mousemove","resize"]){const s=[...t];t.length=0,s.forEach(n=>{if(n.type in e){const i=t.findIndex(a=>a.type in e);i>-1?t[i]=n:t.push(n)}else t.push(n)})}function j(){var s;let t=!0;document.body.children.length!==1&&(console.error(`document body has ${document.body.children.length} children, must have 1`),t=!1),document.querySelector("body>script")||(console.error("document body must be a single <script> element"),t=!1),document.querySelector("link[rel=stylesheet]")&&(console.error("no <style> tags allowed"),t=!1);const e=document.querySelectorAll("head>script");return(e.length>1||!((s=e[0])!=null&&s.src.includes("vite/client")))&&(console.error("only 1 <script> tag allowed in head for Vite client"),t=!1),document.querySelector("link:not([rel=icon])")&&(console.error('only <link> allowed is 1 <link rel="icon" ...> in head'),t=!1),t||console.log("ðŸ›‘ SimpleKit will not run with issues above. Fix HTML page hosting SimpleKit and/or disable browser plug-ins."),t}function J(t="whitesmoke"){let e=document.createElement("canvas");return document.body.appendChild(e),e.style.setProperty("background",t),document.documentElement.style.setProperty("width","100%"),document.documentElement.style.setProperty("height","100%"),document.documentElement.style.setProperty("margin","0"),document.documentElement.style.setProperty("padding","0"),document.body.style.setProperty("width","100%"),document.body.style.setProperty("height","100%"),document.body.style.setProperty("margin","0"),document.body.style.setProperty("padding","0"),e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),e.style.setProperty("display","block"),e.width=document.body.clientWidth,e.height=document.body.clientHeight,window.addEventListener("resize",()=>{e.width=document.body.clientWidth,e.height=document.body.clientHeight}),console.info(` created ${e.width} by ${e.height} canvas`),e}const Z="1.0.1";function Q(t,e){U(t);let s=[];for(t.length==0&&t.push({type:"null",timeStamp:e});t.length>0;){const n=t.shift();n&&L.forEach(i=>{const a=i.update(n);a&&s.push(a)})}D&&s.forEach(n=>D(n)),I&&I(e),P&&P(S)}let S;const L=[q,W,_,B];function tt(t){L.push(t),console.log(`added event translator, now ${L.length} translators`)}function et(t){D=t}let D;function st(t){P=t}let P;function it(t){I=t}let I;function nt(){if(console.info(`ðŸ§° SimpleKit v${Z} *Canvas Mode* startup`),!j())return!1;const e=J().getContext("2d");return e?(S=e,G(Q),{width:S.canvas.width,height:S.canvas.height}):(console.error("Unable to get graphics context from canvas"),!1)}const at=(t,e,s)=>t+(e-t)*s;class K{constructor(e,s,n,i,a=l=>l){h(this,"startTime");h(this,"_isRunning",!1);this.startValue=e,this.endValue=s,this.duration=n,this.updateValue=i,this.easing=a}start(e){this.startTime=e,this._isRunning=!0}get isRunning(){return this._isRunning}update(e){if(!this._isRunning||this.startTime===void 0)return;const s=Math.min(1,(e-this.startTime)/this.duration),n=at(this.startValue,this.endValue,this.easing(s));this.updateValue(n),s===1&&(this.startTime=void 0,this._isRunning=!1)}}class rt{constructor(e=0,s=0,n=0,i=20,a="grey"){h(this,"ring",null);h(this,"ringSize",1);h(this,"offsetX",0);h(this,"offsetY",0);h(this,"state","future");h(this,"isHover",!1);h(this,"isDown",!1);this.id=e,this.x=s,this.y=n,this.radius=i,this.fill=a}onClick(e){this.ring=new K(1,1.5,333,s=>{this.ringSize=s}),this.ring.start(e)}update(e){this.ring&&this.ring.update(e)}draw(e){var a;e.save();let s;switch(this.state){case"next":s="white";break;case"clicked":s=this.fill;break;case"future":s="darkgrey";break}const n=this.x+this.offsetX,i=this.y+this.offsetY;e.beginPath(),e.arc(n,i,this.radius,0,2*Math.PI),e.fillStyle=s,e.fill(),this.isHover&&(e.beginPath(),e.arc(n,i,this.radius,0,2*Math.PI),e.strokeStyle="lightblue",e.lineWidth=3,e.stroke()),this.isDown&&(e.beginPath(),e.arc(n,i,this.radius+3,0,2*Math.PI),e.strokeStyle="yellow",e.lineWidth=3,e.stroke()),(a=this.ring)!=null&&a.isRunning&&(e.beginPath(),e.arc(n,i,this.radius+this.ringSize,0,2*Math.PI),e.strokeStyle="yellow",e.lineWidth=3,e.stroke()),e.fillStyle=this.state==="future"?"lightgrey":"black",e.font="20px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillText(`${this.id}`,n,i),e.restore()}hitTest(e,s){const n=e-this.x,i=s-this.y;return n*n+i*i<=this.radius*this.radius}}class ot{constructor(e,s,n="white"){h(this,"offsetX",0);h(this,"offsetY",0);h(this,"animate",new K(0,1,750,e=>{this.offsetX=(this.end.x-this.start.x)*e,this.offsetY=(this.end.y-this.start.y)*e}));this.start=e,this.end=s,this.fill=n}update(e){this.animate.update(e)}startAnimation(e){this.animate.start(e)}draw(e){e.save();const s=this.animate.isRunning?this.start.x+this.offsetX:this.end.x,n=this.animate.isRunning?this.start.y+this.offsetY:this.end.y;e.beginPath(),e.moveTo(this.start.x,this.start.y),e.lineTo(s,n),e.lineWidth=5,e.strokeStyle=this.fill,e.stroke(),e.restore()}}const lt={state:"IDLE",movementThreshold:10,timeThreshold:1e3,startX:0,startY:0,startTime:0,update(t){switch(this.state){case"IDLE":t.type=="mousedown"&&(this.state="DOWN",this.startX=t.x??0,this.startY=t.y??0,this.startTime=t.timeStamp);break;case"DOWN":if(t.type=="mouseup"||t.type=="mousemove"&&t.x&&t.y&&X(t.x,t.y,this.startX,this.startY)>this.movementThreshold)this.state="IDLE";else if(t.timeStamp-this.startTime>this.timeThreshold)return this.state="IDLE",{type:"longclick",timeStamp:t.timeStamp,x:t.x??this.startX,y:t.y??this.startY};break}}};let o="start";const y=50;let z=0,p=30,c=1,u=!0;const g={width:0,height:0};let v=!1,k=[],r=b(6),w=0,O=0,x=Number.MAX_VALUE;et(t=>{switch(t.type){case"longclick":o==="play"&&(o="start",r=b(r.length),u=!0,c=1);break;case"resize":const{width:e,height:s}=t;g.width=e,g.height=s,u=!0;break;case"mousedown":if(o==="start"||o==="play"){const{x:i,y:a}=t,l=r.find(d=>d.hitTest(i,a));l?(l.isDown=!0,v=l.id!==c):v=!0}break;case"mouseup":(o==="start"||o==="play")&&(r.forEach(i=>i.isDown=!1),v=!1);break;case"mousemove":if(o==="start"||o==="play"){const{x:i,y:a}=t,l=r.find(d=>d.hitTest(i,a));l?l.isHover=!0:r.forEach(d=>d.isHover=!1)}break;case"click":if(o==="start"||o==="play"){const{x:i,y:a}=t,l=r.find(d=>d.hitTest(i,a));l&&l.id===c&&(l.onClick(t.timeStamp),R(l,t.timeStamp))}break;case"keydown":const{key:n}=t;switch(n){case"]":o==="start"&&r.length<8&&(r=b(r.length+1),u=!0,C());break;case"[":o==="start"&&r.length>3&&(r=b(r.length-1),u=!0,C());break;case"}":o==="start"&&p<45&&(p+=5,u=!0);break;case"{":o==="start"&&p>15&&(p-=5,u=!0);break;case" ":(o==="start"||o==="end")&&(r=b(r.length),u=!0,o==="end"&&(o="start",c=1));break;case"c":if(o==="play"){const i=r.find(a=>a.id===c);i&&(i.onClick(t.timeStamp),R(i,t.timeStamp))}break}break}u&&(ct(0,y,g.width,g.height-y),u=!1)});it(t=>{o==="play"&&(w=(t-O)/1e3),k.forEach(e=>e.update(t)),r.forEach(e=>e.update(t)),o==="end"&&ht()});let E=0;function ht(){E+=.2,r.forEach((e,s)=>{e.offsetX=Math.sin(E+s*2)*10,e.offsetY=Math.cos(E+s*2)*10});const t=r.slice(0).sort((e,s)=>e.id-s.id);k.forEach((e,s)=>{e.start.x=t[s].x+t[s].offsetX,e.start.y=t[s].y+t[s].offsetY,e.end.x=t[s+1].x+t[s+1].offsetX,e.end.y=t[s+1].y+t[s+1].offsetY})}st(t=>{switch(t.fillStyle=v?"darkred":"black",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.strokeStyle="white",t.lineWidth=2,t.beginPath(),t.moveTo(0,y),t.lineTo(t.canvas.width,y),t.stroke(),t.fillStyle="white",t.font="24px sans-serif",t.textAlign="center",t.textBaseline="middle",o){case"start":t.fillText("click target 1 to begin",t.canvas.width/2,y/2);break;case"play":t.fillText(`${w.toFixed(2)}s`,t.canvas.width/2,y/2);break;case"end":const e=w===x?"(new best!)":`(best ${x.toFixed(2)}s)`;t.fillText(`${w.toFixed(2)}s ${e}`,t.canvas.width/2,y/2)}k.forEach(e=>e.draw(t)),r.forEach(e=>e.draw(t))});tt(lt);nt();function C(){x=Number.MAX_VALUE}function b(t){k=[];let e=[];for(let s=0;s<t;s++)e.push(new rt(s+1,p));return e[0].state="next",e.sort(()=>Math.random()-.5),z=Math.random()*2*Math.PI,e}function ct(t,e,s,n){const i=p+30;t+=i,e+=i,s-=i*2,n-=i*2;const a=Math.min(s,n)/2,l=s/2,d=n/2,$=r.length;r.forEach((m,f)=>{const Y=z+f*2*Math.PI/$;m.x=t+l+a*Math.cos(Y),m.y=e+d+a*Math.sin(Y),m.radius=p}),k.forEach((m,f)=>{m.start.x=r[f].x,m.start.y=r[f].y,m.end.x=r[f+1].x,m.end.y=r[f+1].y})}function R(t,e){c===1&&(o="play",O=e,w=0),t.state="clicked",t.fill=`hsl(${c/r.length*360}, 100%, 50%)`;const s=r.find(n=>n.id===c-1);if(s){const n=new ot({x:s.x,y:s.y},{x:t.x,y:t.y},`hsl(${(c-1)/r.length*360}, 100%, 50%)`);n.startAnimation(e),k.push(n)}if(c++,c<=r.length){const n=r.find(i=>i.id===c);n&&(n.state="next")}else r.forEach(n=>n.isHover=!1),o="end",x=Math.min(x,w)}
